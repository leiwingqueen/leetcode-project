package graph

import "sort"

// leetcode submit region begin(Prohibit modification and deletion)
func minMalwareSpread(graph [][]int, initial []int) int {
	n := len(graph)
	sort.Ints(initial)
	count := func(removeNode int) int {
		var queue []int
		visit := make([]bool, n)
		res := 0
		for _, node := range initial {
			if node != removeNode {
				queue = append(queue, node)
				visit[node] = true
				res++
			}
		}
		for len(queue) > 0 {
			size := len(queue)
			for _, node := range queue[:size] {
				for next, connect := range graph[node] {
					if connect == 1 && !visit[next] {
						queue = append(queue, next)
						visit[next] = true
						res++
					}
				}
			}
			queue = queue[size:]
		}
		return res
	}
	res := -1
	minCnt := n + 1
	for _, node := range initial {
		cnt := count(node)
		if cnt < minCnt {
			minCnt = cnt
			res = node
		}
	}
	return res
}
