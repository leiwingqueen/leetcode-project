package com.liyongquan.dp;

//å‡å¦‚æœ‰ä¸€æ’æˆ¿å­ï¼Œå…± n ä¸ªï¼Œæ¯ä¸ªæˆ¿å­å¯ä»¥è¢«ç²‰åˆ·æˆ k ç§é¢œè‰²ä¸­çš„ä¸€ç§ï¼Œä½ éœ€è¦ç²‰åˆ·æ‰€æœ‰çš„æˆ¿å­å¹¶ä¸”ä½¿å…¶ç›¸é‚»çš„ä¸¤ä¸ªæˆ¿å­é¢œè‰²ä¸èƒ½ç›¸åŒã€‚
//
// å½“ç„¶ï¼Œå› ä¸ºå¸‚åœºä¸Šä¸åŒé¢œè‰²æ²¹æ¼†çš„ä»·æ ¼ä¸åŒï¼Œæ‰€ä»¥æˆ¿å­ç²‰åˆ·æˆä¸åŒé¢œè‰²çš„èŠ±è´¹æˆæœ¬ä¹Ÿæ˜¯ä¸åŒçš„ã€‚æ¯ä¸ªæˆ¿å­ç²‰åˆ·æˆä¸åŒé¢œè‰²çš„èŠ±è´¹æ˜¯ä»¥ä¸€ä¸ª n x k çš„çŸ©é˜µæ¥è¡¨ç¤ºçš„ã€‚
//
// ä¾‹å¦‚ï¼Œcosts[0][0] è¡¨ç¤ºç¬¬ 0 å·æˆ¿å­ç²‰åˆ·æˆ 0 å·é¢œè‰²çš„æˆæœ¬èŠ±è´¹ï¼›costs[1][2] è¡¨ç¤ºç¬¬ 1 å·æˆ¿å­ç²‰åˆ·æˆ 2 å·é¢œè‰²çš„æˆæœ¬èŠ±è´¹ï¼Œä»¥æ­¤
//ç±»æ¨ã€‚è¯·ä½ è®¡ç®—å‡ºç²‰åˆ·å®Œæ‰€æœ‰æˆ¿å­æœ€å°‘çš„èŠ±è´¹æˆæœ¬ã€‚
//
// æ³¨æ„ï¼š
//
// æ‰€æœ‰èŠ±è´¹å‡ä¸ºæ­£æ•´æ•°ã€‚
//
// ç¤ºä¾‹ï¼š
//
// è¾“å…¥: [[1,5,3],[2,9,4]]
//è¾“å‡º: 5
//è§£é‡Š: å°† 0 å·æˆ¿å­ç²‰åˆ·æˆ 0 å·é¢œè‰²ï¼Œ1 å·æˆ¿å­ç²‰åˆ·æˆ 2 å·é¢œè‰²ã€‚æœ€å°‘èŠ±è´¹: 1 + 4 = 5;
//Â     æˆ–è€…å°† 0 å·æˆ¿å­ç²‰åˆ·æˆ 2 å·é¢œè‰²ï¼Œ1 å·æˆ¿å­ç²‰åˆ·æˆ 0 å·é¢œè‰²ã€‚æœ€å°‘èŠ±è´¹: 3 + 2 = 5.
//
//
// è¿›é˜¶ï¼š
//æ‚¨èƒ½å¦åœ¨ O(nk) çš„æ—¶é—´å¤æ‚åº¦ä¸‹è§£å†³æ­¤é—®é¢˜ï¼Ÿ
// Related Topics åŠ¨æ€è§„åˆ’
// ğŸ‘ 64 ğŸ‘ 0


public class MinCost2 {
    /**
     * dpè¡¨è¾¾å¼
     * <p>
     * f(i,j)è¡¨ç¤ºå‰iæ ‹æˆ¿å­åˆ‡æœ€åä¸€æ ‹æˆ¿å­ç²‰åˆ·æˆé¢œè‰²jçš„æœ€å°èŠ±è´¹
     * <p>
     * f(i,j)=min{f(i-1,1),f(i-1,2),...,f(i-1,j-1),f(i-1,j+1),...,f(i-1,k)}+costs[i][j]
     * <p>
     * æ—¶é—´å¤æ‚åº¦O(nk^2)
     * ç©ºé—´å¤æ‚åº¦O(nk)
     *
     * @param costs
     * @return
     */
    public int minCostII(int[][] costs) {
        int n = costs.length;
        if (n == 0) {
            return 0;
        }
        int k = costs[0].length;
        int[][] dp = new int[n][k];
        //åˆå§‹åŒ–
        for (int i = 0; i < k; i++) {
            dp[0][i] = costs[0][i];
        }
        //dpè¿­ä»£
        for (int i = 1; i < n; i++) {
            for (int j = 0; j < k; j++) {
                //è®¡ç®—f(i,j)ï¼Œè¿™é‡Œå¯ä»¥åšä¸€ä¸ªä¼˜åŒ–ï¼Œç›¸å½“äºåˆ†åˆ«æ±‚dp[i-1][j]çš„å·¦å³ä¾§çš„æœ€å°å€¼
                int min = Integer.MAX_VALUE;
                for (int l = 0; l < k; l++) {
                    if (l != j) {
                        min = Math.min(min, dp[i - 1][l]);
                    }
                }
                min += costs[i][j];
                dp[i][j] = min;
            }
        }
        int res = Integer.MAX_VALUE;
        for (int i = 0; i < k; i++) {
            res = Math.min(res, dp[n - 1][i]);
        }
        return res;
    }

    /**
     * ç¬¬ä¸‰å±‚è¿­ä»£ä¼˜åŒ–
     * <p>
     * æ—¶é—´å¤æ‚åº¦O(n*k)
     * ç©ºé—´å¤æ‚åº¦O(n*k)
     *
     * @param costs
     * @return
     */
    public int minCostII2(int[][] costs) {
        int n = costs.length;
        if (n == 0) {
            return 0;
        }
        int k = costs[0].length;
        int[][] dp = new int[n][k];
        //åˆå§‹åŒ–
        for (int i = 0; i < k; i++) {
            dp[0][i] = costs[0][i];
        }
        //dpè¿­ä»£
        for (int i = 1; i < n; i++) {
            //é¢„è®¡ç®—å·¦å³ä¸¤è¾¹æœ€å°å€¼
            int[] left = new int[k], right = new int[k];
            left[0] = Integer.MAX_VALUE;
            right[k - 1] = Integer.MAX_VALUE;
            for (int j = 1; j < k; j++) {
                left[j] = Math.min(left[j - 1], dp[i - 1][j - 1]);
            }
            for (int j = k - 2; j >= 0; j--) {
                right[j] = Math.min(right[j + 1], dp[i - 1][j + 1]);
            }
            for (int j = 0; j < k; j++) {
                //è®¡ç®—f(i,j)ï¼Œè¿™é‡Œå¯ä»¥åšä¸€ä¸ªä¼˜åŒ–ï¼Œç›¸å½“äºåˆ†åˆ«æ±‚dp[i-1][j]çš„å·¦å³ä¾§çš„æœ€å°å€¼
                int min = Math.min(left[j], right[j]);
                min += costs[i][j];
                dp[i][j] = min;
            }
        }
        int res = Integer.MAX_VALUE;
        for (int i = 0; i < k; i++) {
            res = Math.min(res, dp[n - 1][i]);
        }
        return res;
    }
}
